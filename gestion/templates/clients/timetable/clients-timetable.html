{% extends 'base.html' %}
{% load i18n static gestion_tags%}

{% block central_content %}
    <link rel="stylesheet" href="{% static 'css/calendar.css' %}" >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="{% static "js/calendar.js" %}"></script>

	<div class="row">	
		<div class="col-12">
			<div class="toolbar-content p-3">
		        <h2 class="pathway">
                	{%trans 'Cliente'%}: <span class="badge badge-secondary"> {{obj.name}}</span></h2>
	            <a class="btn btn-sm new" href="{%url 'clients'%}"><i class="fa fa-arrow-left"></i> {% trans 'Volver' %}</a>
        	</div>
		</div>
	</div>

    <div class="content">
        <div class="sidebar">
            <div class="row">
                <div class="col-6"><h2 class="pt-2">ðŸ‘¥ Empleados</h2></div>
                <div class="col-6 text-end">
                    <button class="btn btn-sm new ark" data-url="{% url "clients-timetable-employees-add" %}" 
                        data-target-modal="common-modal" data-obj_id="{{obj.id}}"> <i class="fas fa-plus"></i> AÃ±adir</button>
                </div>
            </div>
            <div id="employee-list" class="employee-list">{% include "clients/timetable/clients-timetable-employees.html" %}</div>
        </div>

        <div class="calendar-container">
            <div class="calendar-header">
                <h2 id="currentMonth">Diciembre 2025</h2>
                <div class="month-navigation">
                    <button class="nav-btn" id="prevMonth" data-client="{{obj.id}}">â—€</button>
                    <button class="btn btn-secondary" id="todayBtn" data-client="{{obj.id}}">Hoy</button>
                    <button class="nav-btn" id="nextMonth" data-client="{{obj.id}}">â–¶</button>
                </div>
            </div>

            <div class="calendar" id="calendarGrid">
                <div class="day-header">Lun</div>
                <div class="day-header">Mar</div>
                <div class="day-header">MiÃ©</div>
                <div class="day-header">Jue</div>
                <div class="day-header">Vie</div>
                <div class="day-header">SÃ¡b</div>
                <div class="day-header">Dom</div>
            </div>
        </div>
    </div>

    {% include "common-modal.html" %}

    {#{{ obj.assigments|json_script:"assigments-data" }}#}
    <button id="btn-start" data-client="{{obj.id}}" style="border:none"></button>
    <script> setTimeout(()=>{$("#btn-start").click();}, 500); </script>


{% endblock central_content %}
